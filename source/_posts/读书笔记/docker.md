---
title: docker
categories: 额外内容
---

## 作用

一种虚拟化的技术。

> 解决因为依赖而导致各种各样的问题

> 虚拟机可以对运行环境进行封装和隔离，但虚拟机消耗空闲的磁盘，内存等硬件资源，且不利于快速部署和扩展

> docker具有与虚拟机同样的优点(容器内部与外部的环境是隔离的，每个容器内部配置的资源不会影响到其他容器，跨平台)，还可以节省资源，生成镜像快速部署和启停，具有强大的编排工具可以批量跨机器操作容器等。

## 存储

直接存在容器中缺点：

> 数据无法持久化。当容器无法再启动时，那么里面的数据就无法再进行读取。

> 数据隔离，容器的数据无法与其他容器或者主机进行共享

> 写入速度慢，容器写入的数据会被转化为联合文件系统格式，不如直接写入主机的速度快

docker提供了三种挂载数据的方式：存储卷，绑定挂载，tmpfs挂载

### 绑定挂载

直接让容器和主机共享目录和文件，可能在主机任何位置被进行存储，或者被任意进程进行修改。

> 使用场景

- 配置文件

- 开发环境中的源代码或者编译后的代码

- 其他一些特殊的文件或者目录结构

### tmpfs挂载

只存储于主机的内容，不存储于主机的文件系统中

> 使用场景

- 安全原因：不想数据持久化也不想存储于容器中，需要适应后立即删除

- 性能原因：大数据快速读写

### 存储卷(推荐

通过docker创建一个卷，并以文件的形式存储于主机磁盘中，非docker进程无法修改这个文件

好处：

- 相比绑定挂载，数据更加容易迁移和备份

- 可以通过docker命令或者docker api进行管理

- 在Linux和window主机都可以使用

- 跨容器共享数据更加安全

- 允许存储到远程主机或者云设备，允许对数据进行加密或执行其他高级功能

- 新的卷能被容器内的文件预填充

> 使用场景

- 多容器共享数据。当容器需要的卷不存在时，会创建一个新的卷。卷不会随着容器的消失而消失，需要手动删除，还可以设置其只读/只读写属性

- 主机无法提供给定的目录或者文件结构时，卷能解耦主机和容器的运行环境

- 数据需要被存储于云设备或者远程主机而不仅仅是本地时

- 数据需要从一台主机上的容器备份/恢复/迁移到另一台主机上的容器时。