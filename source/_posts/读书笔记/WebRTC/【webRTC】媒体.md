---
title: webRTC媒体
categories: 扩展阅读
tags:
  - 扩展阅读
  - webRTC
---

## 媒体

### webRCT的媒体

#### 轨道

MediaStreamTrack是webRTC中的基本媒体单元，此轨道代表一种设备或录制内容（称为源）可返回的单一类型的媒体。单个立体声源或6声道环绕声音音频信号均可视为一个轨道，即使二者都是由多个音频声道构成。依据webRTC文档的定义，轨道的内容“将一起进行编码，以便作为某种有效负载类型进行传输”。即在使用对等连接进行传输时，轨道的各个声道将被视为一个单元，即使其在本地处于启用/禁用或静音状态

每个轨道都有一个源与之关联。通过webRTC不能之间访问或控制源。对源的一切控制都通过轨道实施。轨道不仅可以是来自源的原始媒体，还可能是浏览器提供的经过转换的版本

不同的MediaStreamTrack对象可代表同一媒体源。有两种方式可用于暂停轨道的媒体：禁用、静音

将轨道静音/取消静音由用户或浏览器执行，而静音表示轨道的底层媒体源暂时无法提供媒体。一般来说，应用程序无法控制何时将轨道静音，但是其可以检查轨道的muted属性值，静音后，音频轨道将不再发声，视频轨道将显示黑屏。提供将轨道对象的enabled=false，可单独逐一禁用每个轨道。这两个属性均独立于轨道的readyState属性。这些属性彼此独立，可以同时存在

ready State属性表示轨道的状态

    new：尚未连接至媒体
    
    live：可以生成媒体
    
    ended：表示其源当前没有且永远无法提供更多数据，例如拔掉正在使用的摄像头电源

#### 流

MediaStream是MediaStreamTrack对象集合，创建媒体流方式：

1、通过现有的Media Stream中复制轨道来请求对本地媒体的访问

2、使用对等连接来接收新的流

请求和访问本地媒体只有一种方式，通过`getUserMedia`。通过MediaStream构造函数可以将现有的MediaStream对象轨道“复制”到新的MediaStream对象中，该构造函数将现有的一个MediaStream对象或一系列MediaStreamTrack对象用作参数。还可以完全不指定参数，并且能在现有的MediaStream添加（addTrack）和删除（removeTrack）轨道，但这一功能并未广泛得到支持。还可以通过clone来复制流及其所有轨道。对于派生的媒体流（基于其他而创建的），MediaStream构造函数的数组参数不必全都来自于现有的同一MediaStream对象，而是允许进行混搭。各轨道可以属于不同的类型，同一MediaStream对象同时包含音视频。

无论MediaStream对象是如何创建的，都有共同的特征：MediaStream对象中的所有轨道将在呈现时进行同步。但是流中的各个轨道并未排序，任何添加重复轨道都会被忽略且没有任何提示

#### 媒体选择和控制